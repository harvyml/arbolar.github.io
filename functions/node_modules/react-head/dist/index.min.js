!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.ReactHead={},e.React,e.ReactDOM)}(this,function(e,i,u){"use strict";function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var s=function(e,t){if(!e)throw new Error("Invariant failed")},t=i.createContext(null),l=t.Consumer,a=t.Provider,r=function(a){function e(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))||this).state={canUseDOM:!1},e.headTags=null,e.index=-1,e}n(e,a);var t=e.prototype;return t.componentDidMount=function(){var e=this.props,t=e.tag,n=e.name,r=e.property;this.setState({canUseDOM:!0}),this.index=this.headTags.addClientTag(t,n||r)},t.componentWillUnmount=function(){this.headTags.removeClientTag(this.props.tag,this.index)},t.render=function(){var r=this,e=this.props,a=e.tag,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,["tag"]);return i.createElement(l,null,function(e){if(e||s(!1),r.headTags=e,r.state.canUseDOM){if(!e.shouldRenderTag(a,r.index))return null;var t=i.createElement(a,o);return u.createPortal(t,document.head)}var n=i.createElement(a,c({"data-rh":""},o));return e.addServerTag(n),null})},e}(i.Component);function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=["title","meta"],o=function(r){function e(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(o=r.call.apply(r,[this].concat(t))||this).indices=new Map,o.state={addClientTag:function(r,a){if(-1!==d.indexOf(r)){o.setState(function(e){var t,n=e[r]||[];return(t={})[r]=n.concat([a]),t});var e=p(p(o)).indices,t=e.has(r)?e.get(r)+1:0;return e.set(r,t),t}return-1},shouldRenderTag:function(e,t){if(-1!==d.indexOf(e)){var n=o.state[e];return n&&n.lastIndexOf(n[t])===t}return!0},removeClientTag:function(r,a){o.setState(function(e){var t,n=e[r];return n?(n[a]=null,(t={})[r]=n,t):null})},addServerTag:function(r){var e=o.props.headTags||[];if(-1!==d.indexOf(r.type)){var t=e.findIndex(function(e){var t=e.props.name||e.props.property,n=r.props.name||r.props.property;return e.type===r.type&&t===n});-1!==t&&e.splice(t,1)}e.push(r)}},o}n(e,r);var t=e.prototype;return t.componentDidMount=function(){var e=document.head.querySelectorAll('[data-rh=""]');Array.prototype.forEach.call(e,function(e){return e.parentNode.removeChild(e)})},t.render=function(){return"undefined"!=typeof window||Array.isArray(this.props.headTags)||s(!1),i.createElement(a,{value:this.state},this.props.children)},e}(i.Component);e.Title=function(e){return i.createElement(r,c({tag:"title"},e))},e.Style=function(e){return i.createElement(r,c({tag:"style"},e))},e.Meta=function(e){return i.createElement(r,c({tag:"meta"},e))},e.Link=function(e){return i.createElement(r,c({tag:"link"},e))},e.HeadProvider=o,Object.defineProperty(e,"__esModule",{value:!0})});
